@* 
    NavMenu.razor
    Este componente define el menú lateral de navegación de la aplicación.
    Aquí se colocan los enlaces a las distintas páginas (componentes .razor).
    Por defecto la plantilla incluye: Home, Counter y Weather.
    Se ha eliminado Weather porque era un ejemplo de la plantilla.
    Más adelante aquí se agregará el acceso a la página de Productos.
*@

@inject NavigationManager NavManager

<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">FrontendBlazorApi</a>
        <button title="Toggle navigation" class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</div>

<div class="@NavMenuCssClass nav-scrollable" @onclick="ToggleNavMenu">
    <nav class="flex-column position-relative">
        @* Enlace a la página Home (Index) *@
        <div class="nav-item px-3 position-relative ">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href=""
                Match="NavLinkMatch.All">
                Home
                @if (NavManager.Uri.TrimEnd('/').Equals(NavManager.BaseUri.TrimEnd('/'),
                                StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                            <path fill="white"
                                d="M234.2 8.6c12.3-11.4 31.3-11.4 43.5 0L368 92.3 368 80c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 101.5 37.8 35.1c9.6 9 12.8 22.9 8 35.1S493.2 272 480 272l-16 0 0 176c0 35.3-28.7 64-64 64l-288 0c-35.3 0-64-28.7-64-64l0-176-16 0c-13.2 0-25-8.1-29.8-20.3s-1.6-26.2 8-35.1l224-208zM240 320c-26.5 0-48 21.5-48 48l0 96 128 0 0-96c0-26.5-21.5-48-48-48l-32 0z" />
                        </svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="productos"
                Match="NavLinkMatch.Prefix">
                Productos
                @if (NavManager.Uri.Contains("/productos", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 640 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                            <path fill="white"
                                d="M560.3 237.2c10.4 11.8 28.3 14.4 41.8 5.5 14.7-9.8 18.7-29.7 8.9-44.4l-48-72c-2.8-4.2-6.6-7.7-11.1-10.2L351.4 4.7c-19.3-10.7-42.8-10.7-62.2 0L88.8 116c-5.4 3-9.7 7.4-12.6 12.8L27.7 218.7c-12.6 23.4-3.8 52.5 19.6 65.1l33 17.7 0 53.3c0 23 12.4 44.3 32.4 55.7l176 99.7c19.6 11.1 43.5 11.1 63.1 0l176-99.7c20.1-11.4 32.4-32.6 32.4-55.7l0-117.5zm-240-9.8L170.2 144 320.3 60.6 470.4 144 320.3 227.4zm-41.5 50.2l-21.3 46.2-165.8-88.8 25.4-47.2 161.7 89.8z" />
                        </svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="usuarios"
                Match="NavLinkMatch.Prefix">
                Usuarios
                @if (NavManager.Uri.Contains("/usuarios", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 448 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                            <path fill="white"
                                d="M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-98.5-79.8-178.3-178.3-178.3l-59.4 0z" />
                        </svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="tipoProductos"
                Match="NavLinkMatch.Prefix">
                Tipo Productos
                @if (NavManager.Uri.Contains("/tipoProductos", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M208 0l80 0 0 56c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-56 80 0c26.5 0 48 21.5 48 48l0 416c0 26.5-21.5 48-48 48l-108.8 0c8.2-14.1 12.8-30.5 12.8-48l0-160c10-13.4 16-30 16-48l0-32c0-44.2-35.8-80-80-80l-176 0 0-96c0-26.5 21.5-48 48-48zM32 336l320 0 0 128c0 26.5-21.5 48-48 48L80 512c-26.5 0-48-21.5-48-48l0-128zM48 192l288 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="entregables"
                Match="NavLinkMatch.Prefix">
                Entregables
                @if (NavManager.Uri.Contains("/entregables", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64l72.9 0 92.1 276.2c-22.5 17.6-37 45-37 75.8 0 53 43 96 96 96 52.4 0 95.1-42 96-94.3l202.1-67.4c16.8-5.6 25.8-23.7 20.2-40.5s-23.7-25.8-40.5-20.2L331.8 357c-17.2-22.1-43.9-36.5-74-37L165.7 43.8C156.9 17.6 132.5 0 104.9 0L32 0zM208 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM280.5 89.3c-25.2 8.2-39 35.3-30.8 60.5l39.6 121.7c8.2 25.2 35.3 39 60.5 30.8l121.7-39.6c25.2-8.2 39-35.3 30.8-60.5L462.8 80.5c-8.2-25.2-35.3-39-60.5-30.8L280.5 89.3z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="tipoResponsable"
                Match="NavLinkMatch.Prefix">
                Tipo Responsable
                @if (NavManager.Uri.Contains("/tipoResponsable", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M224 248a120 120 0 1 1 0-240 120 120 0 1 1 0 240zm-30.5 56l61 0c9.7 0 17.5 7.8 17.5 17.5 0 4.2-1.5 8.2-4.2 11.4l-27.4 32 31 115.1 .6 0 34.6-138.5c2.2-8.7 11.1-14 19.5-10.8 61.9 23.6 105.9 83.6 105.9 153.8 0 15.1-12.3 27.4-27.4 27.4L43.4 512c-15.1 0-27.4-12.3-27.4-27.4 0-70.2 44-130.2 105.9-153.8 8.4-3.2 17.3 2.1 19.5 10.8l34.6 138.5 .6 0 31-115.1-27.4-32c-2.7-3.2-4.2-7.2-4.2-11.4 0-9.7 7.8-17.5 17.5-17.5z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="tipoProyectos"
                Match="NavLinkMatch.Prefix">
                Tipo Proyectos
                @if (NavManager.Uri.Contains("/tipoProyectos", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M133.8 36.3c10.9 7.6 13.5 22.6 5.9 33.4l-56 80c-4.1 5.8-10.5 9.5-17.6 10.1S52 158 47 153L7 113C-2.3 103.6-2.3 88.4 7 79S31.6 69.7 41 79l19.8 19.8 39.6-56.6c7.6-10.9 22.6-13.5 33.4-5.9zm0 160c10.9 7.6 13.5 22.6 5.9 33.4l-56 80c-4.1 5.8-10.5 9.5-17.6 10.1S52 318 47 313L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l19.8 19.8 39.6-56.6c7.6-10.9 22.6-13.5 33.4-5.9zM224 96c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32zM64 376a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="estados"
                Match="NavLinkMatch.Prefix">
                Estado
                @if (NavManager.Uri.Contains("/estados", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M65.9 228.5c13.3-93 93.4-164.5 190.1-164.5 53 0 101 21.5 135.8 56.2 .2 .2 .4 .4 .6 .6l7.6 7.2-47.9 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 53.4-11.3-10.7C390.5 28.6 326.5 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1zm443.5 64c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-53 0-101-21.5-135.8-56.2-.2-.2-.4-.4-.6-.6l-7.6-7.2 47.9 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 320c-8.5 0-16.7 3.4-22.7 9.5S-.1 343.7 0 352.3l1 127c.1 17.7 14.6 31.9 32.3 31.7S65.2 496.4 65 478.7l-.4-51.5 10.7 10.1c46.3 46.1 110.2 74.7 180.7 74.7 129 0 235.7-95.4 253.4-219.5z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

        <div class="nav-item px-3 position-relative">
            <NavLink class="nav-link text-white fw-semibold fs-6 d-block position-relative" href="variableEstrategicas"
                Match="NavLinkMatch.Prefix">
                Variable Estrategica
                @if (NavManager.Uri.Contains("/variableEstrategicas", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="icon-cuadro position-absolute top-50 end-0 translate-middle-y">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M168 56l0 40-78.1 0c-14.3 0-25.9 11.6-25.9 25.9 0 4 .9 8 2.7 11.6l33.4 66.8c-11.4 1.8-20.2 11.7-20.2 23.7 0 13.3 10.7 24 24 24l5.6 0-13.6 136-56.2 70.3c-5 6.3-7.8 14.1-7.8 22.2 0 19.6 15.9 35.5 35.5 35.5l248.9 0c19.6 0 35.5-15.9 35.5-35.5 0-8.1-2.7-15.9-7.8-22.2L288 384 274.4 248 280 248c13.3 0 24-10.7 24-24 0-11.9-8.7-21.9-20.2-23.7l33.4-66.8c1.8-3.6 2.7-7.6 2.7-11.6 0-14.3-11.6-25.9-25.9-25.9l-78.1 0 0-40 16 0c13.3 0 24-10.7 24-24S245.3 8 232 8l-16 0 0-16c0-13.3-10.7-24-24-24S168-21.3 168-8l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0zM325.8 279.6l8.5 85.5 47.4 59.2 4.2 5.7c9.2 13.7 14.1 29.9 14.1 46.5 0 12.7-2.8 24.8-7.9 35.5l83.1 0c20.3 0 36.8-16.5 36.8-36.8 0-7.3-2.2-14.4-6.2-20.4l-25.8-38.7 0-64 13.3-13.3c12-12 18.7-28.3 18.7-45.3L512 192c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 16-32 0 0-16c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32c0 22.4-10.2 42.4-26.2 55.6z"/></svg>
                    </div>
                }
            </NavLink>
        </div>

    </nav>
</div>

@code {

    private bool colapsado = true;

    /*
    Propiedad que define la clase CSS aplicada al contenedor del menú.

    Se usa un operador ternario:
    - Si colapsado == true → retorna "collapse"
    - Si colapsado == false → retorna null (sin clase)

    Nota: Se declara como string? porque puede devolver un valor nulo.
    Esto evita el warning CS8603 ("possible null reference return").
    */
    private string? NavMenuCssClass => colapsado ? "collapse" : null;

    private void ToggleNavMenu()
    {
        colapsado = !colapsado;
    }
}